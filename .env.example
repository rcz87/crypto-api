# ============================================
# CRYPTO API - VPS Environment Configuration
# ============================================
# Copy file ini ke .env dan isi dengan nilai yang sesuai
# cp .env.example .env
#
# IMPORTANT: This configuration is optimized for VPS deployment
# Make sure to update all values before deploying to production

# ============================================
# DATABASE CONFIGURATION
# ============================================
# Option 1: Local PostgreSQL on VPS
DATABASE_URL="postgresql://user:password@localhost:5432/crypto_api"

# Option 2: Cloud Database (Recommended for VPS)
# Neon Database:
# DATABASE_URL="postgresql://user:password@ep-xxx.us-east-2.aws.neon.tech/crypto_api?sslmode=require"
# Supabase:
# DATABASE_URL="postgresql://postgres:password@db.xxx.supabase.co:5432/postgres"

# ============================================
# REDIS CONFIGURATION
# ============================================
# Option 1: Local Redis on VPS (Recommended)
REDIS_URL="redis://localhost:6379"

# Option 2: Redis Cloud (untuk distributed setup)
# REDIS_URL="redis://default:password@redis-xxxxx.cloud.redislabs.com:12345"
# Upstash Redis:
# REDIS_URL="redis://default:password@xxx.upstash.io:6379"

# ============================================
# API KEYS
# ============================================

# CoinGlass API Key (Required)
# Get from: https://www.coinglass.com/pricing
COINGLASS_API_KEY="your_coinglass_api_key_here"

# CoinAPI Key (Required)
# Get from: https://www.coinapi.io/pricing
COINAPI_KEY="your_coinapi_key_here"

# OKX API (Optional - untuk live trading)
OKX_API_KEY="your_okx_api_key"
OKX_SECRET_KEY="your_okx_secret_key"
OKX_PASSPHRASE="your_okx_passphrase"

# ============================================
# APPLICATION CONFIGURATION
# ============================================

# Node Environment
NODE_ENV="production"
# Options: development, production, test

# Server Ports
PORT=5000
PYTHON_SERVICE_PORT=8000

# Node.js Memory Configuration
NODE_OPTIONS="--max-old-space-size=2048"

# ============================================
# LOGGING CONFIGURATION
# ============================================
LOG_LEVEL="INFO"
# Options: DEBUG, INFO, WARNING, ERROR, CRITICAL

# ============================================
# SECURITY CONFIGURATION
# ============================================

# JWT Secret (Generate dengan: openssl rand -base64 32)
JWT_SECRET="your_jwt_secret_here_change_this_in_production"

# Session Secret (Generate dengan: openssl rand -base64 32)
SESSION_SECRET="your_session_secret_here_change_this_in_production"

# CORS Origins (comma-separated) - Update with your actual VPS domain
CORS_ORIGINS="http://localhost:5000,https://yourdomain.com,https://www.yourdomain.com"
FRONTEND_URL="https://yourdomain.com"
API_BASE_URL="https://api.yourdomain.com"

# ============================================
# RATE LIMITING
# ============================================
RATE_LIMIT_WINDOW_MS=900000
# 15 minutes in milliseconds

RATE_LIMIT_MAX_REQUESTS=100
# Max requests per window

# ============================================
# MONITORING & ALERTS (Optional)
# ============================================

# Telegram Bot (untuk alerts)
# System Notification Bot (untuk errors, alerts, system messages)
TELEGRAM_BOT_TOKEN=""
TELEGRAM_CHAT_ID=""

# Signal Bot (untuk trading signals only) - OPTIONAL
# Jika tidak diset, akan menggunakan system bot sebagai fallback
TELEGRAM_SIGNAL_BOT_TOKEN=""
TELEGRAM_SIGNAL_CHAT_ID=""

# Phase 6: Auto Signal Delivery Configuration
ENABLE_TELEGRAM_SIGNAL=true
ALLOWED_SIGNAL_SYMBOLS=SOL,ETH,BTC,AVAX,RENDER
DEFAULT_SL_PERCENT=0.003
DEFAULT_TP_PERCENT=0.007
MIN_SIGNAL_CONFIDENCE=0.6

# Phase 7: Auto Position Sizing & Risk Management
ACCOUNT_EQUITY=10000
RISK_PER_TRADE_PERCENT=1

# SendGrid (untuk email notifications)
SENDGRID_API_KEY=""
SENDGRID_FROM_EMAIL=""

# Sentry (untuk error tracking)
SENTRY_DSN=""

# ============================================
# FEATURE FLAGS
# ============================================
ENABLE_WEBSOCKET=true
ENABLE_GPT_ACTIONS=true
ENABLE_WHALE_ALERTS=true
ENABLE_ETF_TRACKING=true

# ============================================
# PYTHON SERVICE CONFIGURATION
# ============================================
PYTHONUNBUFFERED=1
# Update path sesuai lokasi VPS Anda
PYTHONPATH="/root/crypto-api/coinglass-system"
# Atau jika install di direktori lain:
# PYTHONPATH="/var/www/crypto-api/coinglass-system"
# PYTHONPATH="/home/user/crypto-api/coinglass-system"

# ============================================
# CACHE CONFIGURATION
# ============================================
CACHE_TTL=300
# Cache time-to-live in seconds (5 minutes)

CACHE_MAX_SIZE=1000
# Maximum number of cached items

# ============================================
# WEBHOOK CONFIGURATION (Optional)
# ============================================
WEBHOOK_URL=""
WEBHOOK_SECRET=""

# ============================================
# BACKUP CONFIGURATION (Optional)
# ============================================
BACKUP_ENABLED=false
BACKUP_SCHEDULE="0 2 * * *"
# Cron format: daily at 2 AM

BACKUP_RETENTION_DAYS=30

# ============================================
# VPS DEPLOYMENT NOTES
# ============================================
# 1. Jangan commit file .env ke git! (Sudah ada di .gitignore)
# 2. Gunakan nilai yang kuat untuk secrets (generate dengan openssl)
# 3. Update API keys secara berkala
# 4. Enable monitoring untuk production
# 5. Backup .env file secara teratur
# 6. Setelah update .env, restart services:
#    sudo systemctl restart node_service python_service
# 7. Untuk auto-reload .env changes:
#    sudo systemctl enable env-watcher.path
# 8. Check systemd logs jika ada error:
#    sudo journalctl -u node_service -f
#    sudo journalctl -u python_service -f
