TL;DR

ETF List & Flows: â€¦/api/etf/bitcoin/list (status realtime) dan â€¦/api/etf/bitcoin/flow-history (time-series) valid di Standard. Jangan campur model â€œlistâ€ vs â€œflowsâ€. 
CoinGlass-API
+1

Liquidation: Pakai query params, bukan path â€¦/coin-history/{symbol}. Untuk pair: â€¦/api/futures/liquidation/history; untuk agregat coin: â€¦/api/futures/liquidation/aggregated-history. Ada batas interval di plan rendah; Standard = no limit. 
CoinGlass-API
+1

Simbol: Sumber kebenaran = â€¦/api/futures/supported-exchange-pairs. Resolve dulu, baru tembak endpoint lain. 
CoinGlass-API

WS: URL benar: wss://open-ws.coinglass.com/ws-api?cg-api-key=â€¦ + ping tiap 20s. 
CoinGlass-API

âœ… Validasi solusi kamu vs dokumentasi

ETF

List (status realtime): GET /api/etf/bitcoin/list â€” tersedia di semua plan (termasuk Standard). Field yang â€œtanggalâ€ ada di asset_details.update_date (string) + update_timestamp (ms). Tidak ada field top-level date seperti yang kamu validasi sebelumnyaâ€”makanya empty-string bikin Pydantic protes. 
CoinGlass-API

Flows (time-series): GET /api/etf/bitcoin/flow-history â€” timestamp (ms) + breakdown per ETF. Ini tempatnya kalau butuh flows_1d/7d/30d dalam konteks histori, bukan dari endpoint â€œlistâ€. 
CoinGlass-API

Liquidation

Pair level: GET /api/futures/liquidation/history (pakai pair=SOL-USDT + exchange=OKX + interval=â€¦). Standard: No interval limit (batas interval itu berlaku di plan lebih rendah). 
CoinGlass-API

Coin aggregated: GET /api/futures/liquidation/aggregated-history (pakai query param untuk coin/symbol + interval). Jangan pakai path â€¦/coin-history/SOL â€” itu memang bikin 404. 
CoinGlass-API

Bantu discovery: GET /api/futures/liquidation/coin-list berguna buat daftar koin & rolling sums (1h/4h/12h/24h). Tersedia dari Startup+ (jadi Standard aman). 
CoinGlass-API

ğŸ©¹ Patch spesifik untuk 2 error kamu
ğŸ”´ ERROR #1 â€” ETF Date Validation (empty string)

Masalah: Model kamu expect date top-level dari /etf/bitcoin/list, padahal docs tunjukkan tanggal di asset_details.update_date (string) + update_timestamp (ms). 
CoinGlass-API

Perbaikan yang rapi & aman:

Pisahkan model:

ETFStatusItem âŸ¶ untuk /bitcoin/list (status realtime, nested asset_details.update_date + update_timestamp).

ETFFlowHistoryItem âŸ¶ untuk /bitcoin/flow-history (time-series, timestamp ms).

Validator â€œempty â†’ Noneâ€: untuk asset_details.update_date agar "" tidak bikin 422/Unprocessable.

Prefer time akurat: kalau update_date kosong, baca update_timestamp atau last_quote_time (ms) untuk referensi waktu. 
CoinGlass-API

Kenapa? Karena endpoint â€œlistâ€ dan â€œflow-historyâ€ punya struktur data yang berbeda (status vs time-series). Dengan memisahkan model, kamu mencegah â€œskema silangâ€ yang bikin validasi salah.

ğŸ”´ ERROR #2 â€” SOL Liquidation 404 (â€¦/coin-history/SOL?interval=1h)

Masalah: Path yang dipakai tidak ada di v4. Endpoints v4 untuk liquidations pakai query params, bukan path dynamic seperti itu.

Pair: â€¦/api/futures/liquidation/history â†’ query pair, exchange, interval.

Coin aggregate: â€¦/api/futures/liquidation/aggregated-history â†’ query coin/symbol + interval.

Interval rule: Standard no limit, tapi kalau kamu fallback 422 ke 4h juga bagus untuk robustness. 
CoinGlass-API
+1

Fix saran (konsep):

Standardisasi alur:
symbol_raw â†’ resolve ke pair resmi (via supported-exchange-pairs) â†’ call pair history (atau aggregated coin history) 
CoinGlass-API

Hapus logic â€œcoba berbagai format simbolâ€ (SOL, SOLUSDT, SOL-USD, â€¦) â€” ini menyembunyikan bug mapping. Pakai resolver dari endpoint resmi saja. 
CoinGlass-API